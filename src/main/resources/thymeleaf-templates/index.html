<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" > 

<th:block th:include="./fragments.html :: necessary-styles-and-scripts" > </th:block>

<body>

	<th:block th:include="./navbar.html" > </th:block>

	<div id="white">
		<div class="container">

			<div class="row centered">

				<div id="homePageRandomRecipes" style="display: none">
					<div class="col-lg-6 col-lg-offset-3 centered mt-0">
						<h3> RECEITAS PARA VOCÊ </h3>
						<hr>
					</div>

					<div class="recipe-container" id="random-recipe-container" > </div>
				</div>

				<div>

					<div class="col-lg-6 col-lg-offset-3 centered mt">
						<h3 id="dynamicResultTitle"></h3>
						<hr>
						<p id="dynamicResultDescription">  </p>
					</div>

					<div class="recipe-container" id="dynamic-recipe-container" > </div>

				</div>

			</div>

		</div><!-- /container -->
	</div>

	<script>

		function addStuff(){ 

			if (  new URL(window.location.href).pathname  == '/home' ){
				document.getElementById("homePageRandomRecipes").style.display = "block";
			} else {
				document.getElementById("homePageRandomRecipes").style.display = "none";
				console.log("not home")
			}

			const wasPopulatedFromParams = window.populateRecipesFromURLParams();
			if ( wasPopulatedFromParams == false ) {
				document.getElementById("dynamicResultTitle").innerHTML = `RECEITAS POPULARES NOS ÚLTIMOS DIAS`;
				document.getElementById("dynamicResultDescription").innerHTML = ``;

				window.populateRecipesFromAPI(`/api/receitas/popular/`, document.getElementById("dynamic-recipe-container")); 
			}

		}

		window.onload = () => {
			window.populateRecipesFromAPI(`/api/receitas/`, document.getElementById("random-recipe-container")); 
			addStuff()
		};

		
		window.addEventListener('popstate', (e) => { addStuff() });

	</script>

	<th:block th:include="./footer.html" > </th:block>
	<th:block th:include="./fragments.html :: bootstrap-js"> </th:block>

</body>


</html>

